import createColorElements from"../utils/createElement.mjs";(function(){function a(a){for(const c in console.log(a),a){const d=Object.entries(a[c]).sort((c,a)=>c[1].style.length===a[1].style.length?0:c[1].style.length>a[1].style.length?-1:1);null!==l&&l.appendChild(b(c,d))}}function b(a,b){const d=document.createElement("h4");d.textContent=`${n(a)}(s) used on page`;const e=document.createElement("ul");return b.forEach(b=>{const d=c(a,b);e.appendChild(d)}),e.prepend(d),l.style.width="420px",e}function c(a,b){const[c,e]=b;return"backgroundColor"===a?i({freq:e,style:c,rgbToHex:f,copyToClipboard:h}):"color"===a?i({freq:e,style:c,rgbToHex:f,copyToClipboard:h}):"fontFamily"===a?j({freq:e,style:c,hightLightFontOnPage:d}):k({style:c})}function d(a){chrome.tabs.query({active:!0,currentWindow:!0},function(b){chrome.tabs.sendMessage(b[0].id,{styleId:`${a.target.value}`},function(a){console.log(a)})})}function f(a){const b=a.split("(")[1].split(")").join("").split(",");4===b.length&&b.pop();const c=b.map(a=>{switch(!0){case 0>+a:return 0;case 255<+a:return 255;default:return+a;}}).map(a=>{const b=parseInt(a).toString(16).toUpperCase().trim();return 1===b.length?"0"+b:b}).join("");return`#${c}`}function g(a,b){chrome.notifications.create({type:"basic",iconUrl:"../images/color_16px.png",title:a,message:b,requireInteraction:!1})}async function h(a){if(!navigator.clipboard)return void console.error("Clipboard is unavailable");let b;a.target.innerText?(console.log(a.target),b=a.target.innerText):b=f(a.target.style.backgroundColor);try{await navigator.clipboard.writeText(b),g("Copied to Clipboard!",`${b} has been copied to the clipboard.`)}catch(a){console.error("Failed to copy!",a)}}const{createColorElement:i,createFontElement:j,createDefaultElement:k}=createColorElements();console.log(createColorElements);const l=document.getElementById("main"),m=document.getElementById("spinner");(function(a,b){const c=new MutationObserver(function(a,c){for(const d of a)console.log("mutation",d),"childList"===d.type&&(b.style.display="none",c.disconnect())});a&&c.observe(a,{attributes:!0,childList:!0,subtree:!0})})(l,m);const n=a=>({backgroundColor:"Background Color",color:"Color",fontFamily:"Font Family",fontWeight:"Font Weight",fontSize:"Font Size"})[a];chrome.tabs.query({active:!0,currentWindow:!0},function(a){chrome.tabs.executeScript(a[0].id,{file:"crawlPage.min.js"})}),chrome.runtime.onMessage.addListener(function(b){switch(b.action){case"getState":console.log(b.payload),a(b.payload);break;case"getNotif":g(b.payload.title,b.payload.message);break;case"getCurrentResults":a(b.payload);break;default:console.log(b);}})})();