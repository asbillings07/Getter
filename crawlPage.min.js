(function(){function a(a,b){"undefined"==typeof window.getComputedStyle&&(window.getComputedStyle=function(a){return a.currentStyle});const c=document.body.getElementsByTagName("*"),d={};return Array.from(c).forEach(c=>{!["img","time","iframe","input","br","form"].includes(c.localName)&&c.style&&(f({css:a,nodeElement:c,allStyles:d}),b&&e({pseudoEl:b,css:a,allStyles:d,nodeElement:c}))}),d}function b(a,b){const c={};return a.forEach(a=>{const d=b(a);j(d)||(c[a]=d)}),chrome.runtime.sendMessage({action:"getState",payload:c}),d({hasScriptRunOnPage:!0}),c}function c(a,b=()=>!1){chrome.storage.local.get(a,b)}function d(a,b=()=>!1){chrome.storage.local.set(a)}function e(a){const{pseudoEl:b,css:c,allStyles:d,nodeElement:e}=a,f=getComputedStyle(e,b)[c];f&&!d.includes(f)&&d.push(f)}function f(a){const{css:b,nodeElement:c,allStyles:d}=a,e=new Set(["sans-serif","serif","Arial"]);let f;f="fontFamily"===b?getComputedStyle(c,"")[b].split(",").map(a=>a.trim()).filter(a=>!e.has(a)):getComputedStyle(c,"")[b],f&&(d[f]?d[f].style.push(f):Array.isArray(f)?f.forEach(a=>{d[a]={style:[a],id:g(c)},c.dataset.styleId=`${d[a].id}`}):(d[f]={style:[f],id:g(c)},c.dataset.styleId=`${d[f].id}`))}function g(a){return a.id?a.id:(a.id=k(5),a.id)}function h(a){const b=document.body.getElementsByTagName("*"),c=document.body.querySelectorAll(`[data-style-id="${a}"]`);Array.from(b).forEach(a=>{a.style.backgroundColor=""}),Array.from(c).forEach(a=>{a.style.backgroundColor="#FFAE42"})}function i(a,b,c,d=0){"insertRule"in a?a.insertRule(b+"{"+c+"}",d):"addRule"in a&&a.addRule(b,c,d)}function j(a){return 0===Object.keys(a).length}function k(a){let b="";const c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".length;for(let d=0;d<a;d++)b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".charAt(Math.floor(Math.random()*c));return b}c(null,a=>{const{hasScriptRunOnPage:b}=a}),c("hasScriptRunOnPage",({hasScriptRunOnPage:d})=>{d?c("currentResults",({currentResults:a})=>chrome.runtime.sendMessage({action:"getCurrentResults",payload:a})):chrome.runtime.sendMessage({action:"getValues",payload:null},c=>{b(c.getters,a)})}),chrome.runtime.onMessage.addListener(function(a,b,c){a.styleId&&(h(a.styleId),c({action:"notif",payload:{title:"Font Highlighted",message:"The selected Font has been highlighted in the page"}}))});const l=function(){const a=document.createElement("style");return a.appendChild(document.createTextNode("")),document.head.appendChild(a),a.sheet}();i(l,".style-highlight","background-color: yellow")})();